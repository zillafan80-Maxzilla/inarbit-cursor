---
description: inarbit é«˜é¢‘äº¤æ˜“ç³»ç»Ÿé‡æ„ä»»åŠ¡æ¸…å•
---

# Inarbit HFT ç³»ç»Ÿå¼€å‘æŒ‡å—

æ¯æ¬¡å¼€å§‹ä¼šè¯æ—¶ï¼Œè¯·æŒ‰ç…§æœ¬ä»»åŠ¡æ¸…å•ç»§ç»­æ‰§è¡Œæœªå®Œæˆçš„ä»»åŠ¡é¡¹ã€‚

---

## é¡¹ç›®æ¦‚è¿°

**Inarbit** æ˜¯ä¸€ä¸ªé«˜é¢‘åŠ å¯†è´§å¸å¥—åˆ©ç³»ç»Ÿï¼ŒåŒ…å«ï¼š

- **Python API å±‚**: FastAPI + WebSocket
- **Rust æ ¸å¿ƒå¼•æ“**: é«˜æ€§èƒ½ç­–ç•¥æ‰§è¡Œ
- **React å‰ç«¯**: ç®¡ç†ç•Œé¢
- **æ•°æ®åº“**: PostgreSQL + Redis

---

## ä»»åŠ¡æ¸…å•ï¼ˆä»¥å½“å‰ç³»ç»Ÿç°çŠ¶ä¸ºå‡†ï¼‰

### é˜¶æ®µ 0: åŒæ­¥ä¸æ¸…ç† âœ…

- [x] åŒæ­¥ä»“åº“åˆ° upstream-vscode/main
- [x] æ¸…ç† Firebase ä¾èµ–ä¸é—ç•™æ¨¡å—
- [x] ç»Ÿä¸€å‰ç«¯ä»£ç†ä¸ WebSocket é»˜è®¤ç«¯å£
- [x] ç§»é™¤é—ç•™å…¥å£ `server/main.py`

### é˜¶æ®µ 1: è¿è¡Œé…ç½®ä¸€è‡´æ€§ âœ…

- [x] æ–‡æ¡£/è„šæœ¬ç«¯å£è¯´æ˜ç»Ÿä¸€ä¸º `8000`
- [x] å‰ç«¯ WS é»˜è®¤ `ws://<host>:8000/ws`
- [x] `.env.example` ä»…ä¿ç•™ API/WS é…ç½®

### é˜¶æ®µ 2: æ•°æ®ä¸æœºä¼šç®¡çº¿ ğŸ”„

- [x] è¡Œæƒ…æœåŠ¡å†™å…¥ Redis æŒ‡æ ‡æ ¡éªŒ
- [ ] ä¸‰è§’/æœŸç°æœºä¼šæœåŠ¡äº§å‡ºç¨³å®šæ€§éªŒè¯
- [x] å†³ç­–æœåŠ¡çº¦æŸç­›é€‰é“¾è·¯éªŒè¯
- [x] `/api/v1/system/metrics` æŒ‡æ ‡æ ¸å¯¹

### é˜¶æ®µ 3: OMS æ‰§è¡Œé—­ç¯ ğŸ”„

- [x] æ‰§è¡Œè®¡åˆ’åˆ›å»ºä¸çŠ¶æ€å›å†™
- [x] è®¢å•/æˆäº¤/PNL æ•°æ®é—­ç¯
- [x] OMS å¯¹è´¦æµç¨‹ä¸æ¥å£å¥å£®æ€§
- [x] WS è®¢å•æ¨é€å­—æ®µä¸€è‡´æ€§æ£€æŸ¥

### é˜¶æ®µ 4: é£æ§é—­ç¯ ğŸ”„

- [x] RiskManager æ•°æ®è·å–ä¸ç¼“å­˜å®ç°å®Œå¤‡
- [ ] é£æ§è§„åˆ™ä¸é˜ˆå€¼å¯é…ç½®åŒ–
- [ ] panic/reset/reload_keys æµç¨‹éªŒè¯

### é˜¶æ®µ 5: Rust å¼•æ“å®Œå–„ ğŸ”„

- [ ] executor çœŸå®ä¸‹å•é€»è¾‘è¡¥å…¨
- [ ] risk æ¨¡å—æ£€æŸ¥é€»è¾‘è¡¥å…¨
- [ ] ä¸ Python/Redis çš„è¿è¡Œæ—¶è”è°ƒ

### é˜¶æ®µ 6: æµ‹è¯•ä¸æ–‡æ¡£ ğŸ”„

- [ ] é›†æˆæµ‹è¯•è¡¥é½ï¼ˆOMS/å†³ç­–/é£æ§ï¼‰
- [ ] å‰ç«¯å…³é”®è·¯å¾„ E2E
- [ ] ç«¯åˆ°ç«¯ walkthrough å®Œæˆä¸å¤æ ¸

---

## æ¶æ„è®¾è®¡ï¼ˆå½“å‰ï¼‰

```
inarbit/
â”œâ”€â”€ client/                  # React å‰ç«¯
â”‚   â”œâ”€â”€ src/api/            # æœ¬åœ° API å®¢æˆ·ç«¯
â”‚   â””â”€â”€ src/pages/          # é¡µé¢ç»„ä»¶
â”‚
â”œâ”€â”€ server/                  # Python API å±‚
â”‚   â”œâ”€â”€ app.py              # FastAPI å…¥å£
â”‚   â”œâ”€â”€ api/                # REST + WebSocket
â”‚   â”œâ”€â”€ services/           # è¡Œæƒ…/æœºä¼š/å†³ç­–/OMS
â”‚   â””â”€â”€ db/                 # æ•°æ®åº“å±‚
â”‚
â””â”€â”€ engine/                  # Rust æ ¸å¿ƒå¼•æ“
    â””â”€â”€ src/
        â”œâ”€â”€ main.rs         # å¼•æ“å…¥å£
        â”œâ”€â”€ exchange.rs     # äº¤æ˜“æ‰€è¿æ¥
        â”œâ”€â”€ strategy.rs     # ç­–ç•¥æ¡†æ¶
        â”œâ”€â”€ executor.rs     # è®¢å•æ‰§è¡Œ
        â””â”€â”€ risk.rs         # é£æ§æ£€æŸ¥
```

---

## æ”¯æŒçš„ç­–ç•¥ï¼ˆå½“å‰ï¼‰

| ç­–ç•¥ç±»å‹ | è¯´æ˜ | çŠ¶æ€ |
|---------|------|------|
| triangular | ä¸‰è§’å¥—åˆ© | æœåŠ¡ç«¯å®Œå–„ / å¼•æ“å¾…è¡¥å…¨ |
| cashcarry | æœŸç°å¥—åˆ© | æœåŠ¡ç«¯å®Œå–„ / å¼•æ“å¾…è¡¥å…¨ |
| graph | å›¾æœç´¢å¥—åˆ© | æ—§å¼•æ“å­˜åœ¨ç¼ºå£ |
| grid | ç½‘æ ¼äº¤æ˜“ | æ—§å¼•æ“å­˜åœ¨ç¼ºå£ |
| pair | é…å¯¹äº¤æ˜“ | æ—§å¼•æ“å­˜åœ¨ç¼ºå£ |

---

## æ”¯æŒçš„äº¤æ˜“æ‰€

- Binance
- OKX
- Bybit
- Gate.io
- Bitget
- MEXC

---

## å¿«é€Ÿå¯åŠ¨

```bash
# 1. å¯åŠ¨æ•°æ®åº“
docker-compose up -d

# 2. åˆå§‹åŒ–è¡¨ç»“æ„
psql -U inarbit -d inarbit -f server/db/init.sql

# 3. å¯åŠ¨ Python API
cd server && uvicorn app:app --reload --port 8000

# 4. å¯åŠ¨å‰ç«¯
cd client && npm run dev

# 5. ç¼–è¯‘ Rust å¼•æ“
cd engine && cargo build --release
```

---

## ä¸‹ä¸€æ­¥ä»»åŠ¡

ä¼˜å…ˆå®Œæˆï¼š

1. [ ] è¡Œæƒ…/æœºä¼š/å†³ç­– Redis é“¾è·¯éªŒè¯
2. [ ] OMS è®¡åˆ’ä¸è®¢å•é—­ç¯éªŒè¯
3. [ ] é£æ§æ£€æŸ¥ä¸ panic æµç¨‹éªŒè¯
4. [ ] Rust å¼•æ“ executor/risk TODO è¡¥å…¨

---

## å…¨ä»“åº“ç»“æ„ä¸åŠŸèƒ½åˆ†æè®¡åˆ’

- è¦†ç›–æ¨¡å—ï¼š`client/`ã€`server/`ã€`engine/`ã€`tests/`ã€é…ç½®ä¸æ–‡æ¡£ç›®å½•
- äº§å‡ºç›®æ ‡ï¼šæ¨¡å—çº§ç»“æ„ä¸åŠŸèƒ½åˆ†æã€å…³é”®æµç¨‹ä¸æ•°æ®æµã€ç”Ÿäº§å°±ç»ªå®Œæˆåº¦è¯„ä¼°ã€å®æ–½è®¡åˆ’ä¸é‡Œç¨‹ç¢‘
- è°ƒç ”è·¯å¾„ï¼š
  - å…¥å£ä¸æ¶æ„ï¼š`client/src/main.jsx`ã€`client/src/App.jsx`ã€`server/app.py`ã€`engine/src/main.rs`
  - åç«¯åˆ†å±‚ï¼š`server/api/`ã€`server/services/`ã€`server/db/`ã€`server/config.py`
  - å¼•æ“æ ¸å¿ƒï¼š`engine/src/strategy.rs`ã€`engine/src/exchange.rs`ã€`engine/src/executor.rs`ã€`engine/src/risk.rs`
  - å‰ç«¯æ•°æ®æµï¼š`client/src/api/client.js`ã€`client/src/api/hooks.js`ã€`client/src/pages/`
  - æµ‹è¯•è¦†ç›–ï¼š`server/tests/`ã€`tests/integration/`

---

## ç”Ÿäº§å°±ç»ªå®Œæˆåº¦è¯„ä¼°ï¼ˆåŸºå‡†ï¼šå¯ä¸Šçº¿è¿è¡Œï¼‰

- åŠŸèƒ½å®Œæ•´æ€§ï¼š2.5/5
- ç¨³å®šæ€§ä¸å¯é æ€§ï¼š2.5/5
- å¯è§‚æµ‹æ€§ï¼š2/5
- å®‰å…¨æ€§ï¼š2/5
- å¯è¿ç»´æ€§ï¼š2/5
- æµ‹è¯•è¦†ç›–ï¼š2/5

ç»“è®ºï¼šå½“å‰é˜¶æ®µæ›´é€‚åˆæ¼”ç¤º/å†…æµ‹ï¼Œç”Ÿäº§å°±ç»ªéœ€è¦è¡¥é½çœŸå®æ‰§è¡Œã€é£æ§é—­ç¯ã€å®‰å…¨ä¸å¯è§‚æµ‹æ€§ã€å›å½’æµ‹è¯•ã€‚

---

## æ¨¡å—åŠŸèƒ½çŸ©é˜µï¼ˆæ¥å£ / ä¾èµ– / çŠ¶æ€ / é£é™©ï¼‰

| æ¨¡å— | å…³é”®æ¥å£ | å…³é”®ä¾èµ– | çŠ¶æ€ | ä¸»è¦é£é™© |
| --- | --- | --- | --- | --- |
| client | REST `/api/v1/*`ï¼›WS `/ws/*` | FastAPIã€WebSocket | åŠŸèƒ½å®Œæ•´ | 401å¤„ç†ä¸æƒé™ç»†åŒ–ä¸è¶³ã€å¼‚å¸¸æç¤ºæœ‰é™ |
| client/pages | ç®¡ç†é¡µé¢è·¯ç”±ä¸è¡¨å• | API å®¢æˆ·ç«¯ | è¦†ç›–å®Œæ•´ | å¤æ‚è¡¨å•è”åŠ¨ä¸ç©ºçŠ¶æ€æç¤ºå¯åŠ å¼º |
| server/api | REST è·¯ç”±ä¸WS | servicesã€dbã€auth | å®Œæˆåº¦é«˜ | éƒ¨åˆ†æ¥å£ç¼ºå°‘é™æµ/å®¡è®¡ï¼›å¯†é’¥åŠ å¯†ç­–ç•¥éœ€åŠ å¼º |
| server/auth | `/api/v1/auth/*` | Redisã€PostgreSQL | å®Œæˆåº¦é«˜ | ä¼šè¯ç®¡ç†æœªåšè®¾å¤‡/æ¥æºç»‘å®š |
| server/services.market | è¡Œæƒ…æŠ“å–ä¸ç¼“å­˜ | ccxtã€Redis | å…³é”®é“¾è·¯å¯ç”¨ | æ•°æ®æ—¶å»¶ä¸ç¼“å­˜æ¸…ç†ç­–ç•¥éœ€éªŒè¯ |
| server/services.opportunity | ä¸‰è§’/æœŸç°æœºä¼š | Redisã€è¡Œæƒ…æœåŠ¡ | å…³é”®é“¾è·¯å¯ç”¨ | æœºä¼šè´¨é‡ä¸å™ªå£°è¿‡æ»¤ç­–ç•¥éœ€é•¿æœŸè§‚æµ‹ |
| server/services.decision | å†³ç­–ä¸çº¦æŸ | Redisã€é…ç½®æœåŠ¡ | å…³é”®é“¾è·¯å¯ç”¨ | çº¦æŸé…ç½®è¯¯é…ä¼šå¯¼è‡´æ— å†³ç­– |
| server/services.oms | æ‰§è¡Œ/å¯¹è´¦/å‘Šè­¦ | PostgreSQLã€Redisã€äº¤æ˜“æ‰€ | å…³é”®é“¾è·¯å¯ç”¨ | çœŸå®äº¤æ˜“å›æ»š/è¡¥å¿åœºæ™¯éœ€å‹æµ‹ |
| server/services.risk | é£æ§è§„åˆ™ | PostgreSQLã€Redis | åŸºç¡€å¯ç”¨ | é£æ§ç­–ç•¥ä¸è¦†ç›–åº¦ä»éœ€å®Œå–„ |
| server/db | è¿æ¥æ± ä¸ç¼“å­˜ | asyncpgã€redis | ç¨³å®š | è¿è¡Œæ—¶å¥åº·ä¸æŒ‡æ ‡å¯è§‚æµ‹æ€§ä¸è¶³ |
| engine | ç­–ç•¥å¼•æ“ã€ä¿¡å·å‘å¸ƒ | Redisã€PostgreSQLã€äº¤æ˜“æ‰€WS | åŠå®Œæˆ | çœŸå®æ‰§è¡Œä¸é£é™©æ£€æŸ¥æœªæ¥å…¥ä¸»æµç¨‹ |
| tests | å•æµ‹/é›†æˆ/E2E | pytestã€æœåŠ¡è¿è¡Œç¯å¢ƒ | åŸºç¡€ | è¦†ç›–ä¸è¶³ã€ç¼ºå°‘é•¿è·‘ä¸å®¹ç¾éªŒè¯ |
| config/docs | å¿«é€Ÿå¯åŠ¨/å®æ–½è®¡åˆ’ | Dockerã€è„šæœ¬ | åŸºç¡€ | ä¸ç”Ÿäº§åŒ–éƒ¨ç½²å·®è·å¤§ |

---

## æ‰§è¡Œæ¸…å•ï¼ˆå®ç°çº§ä»»åŠ¡æ‹†è§£ï¼‰

### M1ï¼šæ ¸å¿ƒé—­ç¯å¯ç”¨
- Engineï¼šå®ç° `executor` çœŸå®ä¸‹å•ä¸é”™è¯¯å›æ»šé€»è¾‘
- Engineï¼šå°† `risk` æ£€æŸ¥æ¥å…¥ `strategy.run` ä¸»å¾ªç¯
- Engineï¼šå¤šäº¤æ˜“æ‰€ ticker åˆå¹¶ä¸åˆ†å‘ç­–ç•¥ï¼ˆä¸å†ä»…å–é¦–ä¸ªè¿æ¥ï¼‰
- Serverï¼šæ‰“é€š â€œå¼•æ“ä¿¡å·â†’å†³ç­–â†’OMSæ‰§è¡Œâ€ çš„ç»Ÿä¸€ç®¡çº¿
- Serverï¼šç¡®è®¤ `OMS_PUBLISH_ORDER_DETAIL` å­—æ®µä¸€è‡´æ€§
- æ•°æ®ï¼šè¡¥é½ Redis æŒ‡æ ‡ä¸æœºä¼šé“¾è·¯æ ¡éªŒè„šæœ¬
- OMSï¼šæ‰§è¡Œè®¡åˆ’åˆ›å»ºâ†’è®¢å•â†’æˆäº¤â†’PNL å®Œæ•´å†™å…¥
- å‰ç«¯ï¼šç­–ç•¥çƒ­åˆ‡æ¢ä¸é»˜è®¤ç­–ç•¥è‡ªåŠ¨å¯ç”¨æµç¨‹è”åŠ¨éªŒè¯

### M2ï¼šç¨³å®šæ€§ä¸å¯è§‚æµ‹æ€§
- æŒ‡æ ‡ï¼šç»Ÿä¸€ metrics è¾“å‡ºï¼ˆè¡Œæƒ…ã€æœºä¼šã€å†³ç­–ã€OMSã€é£æ§ï¼‰
- æ—¥å¿—ï¼šç»“æ„åŒ–æ—¥å¿— + å…³é”®è·¯å¾„ trace_id
- å¼‚å¸¸ï¼šOMS å¤±è´¥è¡¥å¿ä¸é‡è¯•ç­–ç•¥éªŒè¯
- WebSocketï¼šæ–­çº¿é‡è¿ä¸é™é€Ÿå‹æµ‹
- æ•°æ®ï¼šRedis/PG è¿æ¥æ± ä¸æ…¢æŸ¥è¯¢ç›‘æ§
- å®‰å…¨ï¼šAPI key åŠ å¯†å­˜å‚¨ä¸æœ€å°æƒé™æ ¡éªŒ

### M3ï¼šå®‰å…¨ä¸è¿ç»´ç”Ÿäº§åŒ–
- å®‰å…¨ï¼šå¯†é’¥ç®¡ç†æ›¿æ¢å›ºå®šå¯†é’¥å­—ç¬¦ä¸²
- éƒ¨ç½²ï¼šæä¾›å¯å¤ç”¨éƒ¨ç½²æ¨¡æ¿ï¼ˆDocker Compose æˆ– k8sï¼‰
- æµ‹è¯•ï¼šOMS/å†³ç­–/é£æ§ç«¯åˆ°ç«¯å›å½’ä¸E2Eè¦†ç›–
- è¿ç»´ï¼šå‘å¸ƒæµç¨‹ã€å›æ»šç­–ç•¥ã€ç¯å¢ƒéš”ç¦»
- ç›‘æ§ï¼šå‘Šè­¦æ¥å…¥ä¸å€¼ç­é€šçŸ¥é—­ç¯
- å®¡è®¡ï¼šå…³é”®æ“ä½œæ—¥å¿—ä¿ç•™ä¸å¯¼å‡º

---

## M1/M2/M3 éªŒæ”¶æ ‡å‡†ä¸æŒ‡æ ‡æ¸…å•

### M1 éªŒæ”¶ï¼ˆæ ¸å¿ƒé—­ç¯ï¼‰
- å¼•æ“ä¿¡å·å¯è§¦å‘ OMS æ‰§è¡Œè®¡åˆ’åˆ›å»ºä¸å®ŒæˆçŠ¶æ€å›å†™
- OMS è®¢å•ä¸æˆäº¤æ•°æ®å¯å®Œæ•´å†™å…¥å¹¶å¯æŸ¥è¯¢
- é£æ§æ£€æŸ¥åœ¨æ‰§è¡Œé“¾è·¯ä¸­ç”Ÿæ•ˆï¼ˆå¯æ¨¡æ‹Ÿæ‹’ç»ï¼‰
- Redis å…³é”®æŒ‡æ ‡å­˜åœ¨ä¸”æ›´æ–°é¢‘ç‡ç¬¦åˆé¢„æœŸ

### M2 éªŒæ”¶ï¼ˆç¨³å®šæ€§ï¼‰
- å…³é”®æœåŠ¡ metrics è¦†ç›–ç‡ >= 80%
- OMS å¤±è´¥è¡¥å¿æµç¨‹è¦†ç›–ä¸»è¦é”™è¯¯åœºæ™¯
- WebSocket æ–­çº¿é‡è¿æˆåŠŸç‡ >= 99%ï¼ˆå‹æµ‹ï¼‰
- å…³é”®è·¯å¾„æ—¥å¿—å¯æŒ‰ trace_id è¿½è¸ª

### M3 éªŒæ”¶ï¼ˆç”Ÿäº§å°±ç»ªï¼‰
- å¯†é’¥ä¸æ•æ„Ÿä¿¡æ¯ä¸å†ç¡¬ç¼–ç ï¼Œé›†ä¸­ç®¡ç†
- å…·å¤‡å¯å¤åˆ¶çš„éƒ¨ç½²ä¸å›æ»šæµç¨‹
- ç«¯åˆ°ç«¯å›å½’é€šè¿‡ç‡ >= 95%ï¼Œè¦†ç›–æ ¸å¿ƒäº¤æ˜“è·¯å¾„

---

## æ‰§è¡Œè®°å½•ï¼ˆæœ€æ–°ï¼‰

- åç«¯å¥åº·ï¼š`GET /` è¿”å› `status=running`
- æŒ‡æ ‡å¿«ç…§ï¼š`/api/v1/system/metrics` è¿”å›ä¸‰è§’æœºä¼š 12ã€æœŸç°æœºä¼š 13ã€å†³ç­– 2
- æœºä¼š/å†³ç­–æŠ½æ ·ï¼š`/api/v1/arbitrage/opportunities` ä¸‰è§’=0ã€æœŸç°=5ï¼›`/api/v1/decision/decisions` å†³ç­–=2ï¼ˆä¸æŒ‡æ ‡å­˜åœ¨å·®å¼‚éœ€ç¡®è®¤åˆ·æ–°èŠ‚å¥ï¼‰
- æ•°æ®æ–°é²œåº¦ï¼šé¦–æ¬¡ `market_data_fresh=false`ï¼ˆage 8173ms > max 5000msï¼‰ï¼ŒäºŒæ¬¡æ£€æŸ¥ä¸º `true`ï¼ˆage 4312msï¼‰ï¼Œéœ€ç»§ç»­è§‚å¯Ÿç¨³å®šæ€§
- å†³ç­–çº¦æŸï¼š`/api/v1/decision/constraints` ä¸ `constraints/auto/effective` æ­£å¸¸è¿”å›ï¼ˆauto ä¸­æœ‰é»‘åå•ä¸å¹³å‡æ•°æ®å»¶è¿Ÿï¼‰
- OMS å‘Šè­¦ï¼š`/api/v1/oms/alerts` è¿”å› 0 æ¡è®°å½•ï¼ˆå½“å‰æ— å‘Šè­¦æ ·æœ¬ï¼‰
- æœºä¼šé“¾è·¯ï¼šmetrics ä¸‰è§’=0 ä¸ zset=0 ä¸€è‡´ï¼›æœŸç° metrics=16ï¼Œè€Œ zset=8/æ¥å£=9ï¼ˆæ¨æµ‹æ‰«ææ€»é‡ä¸å†™å…¥ä¸Šé™/æ»šåŠ¨æ›´æ–°å­˜åœ¨å·®å¼‚ï¼‰
- OMS é—­ç¯ï¼š`execute_latest`(paper) æˆåŠŸï¼›plans/orders/fills å„è¿”å› 3 æ¡ï¼›PNL summary å­—æ®µé½å…¨
- OMS æ¥å£å¥å£®æ€§ï¼š`plans/{id}/reconcile|refresh|cancel` ä¸ `orders/{id}/refresh|cancel` å‡è¿”å› success
- WS è®¢å•å­—æ®µï¼šå®æµ‹ `ws://localhost:8001/ws/orders` æ”¶åˆ°å­—æ®µ `order_id/status/trading_mode/average_price/filled_quantity/fee/fee_currency/external_order_id`ï¼Œä¸é¢„æœŸä¸€è‡´ï¼›detail ç”± `OMS_PUBLISH_ORDER_DETAIL` æ§åˆ¶ï¼ˆplan_id/symbol/side/price ç­‰ï¼‰
- WS detail å®æµ‹ï¼šé‡å¯åç”Ÿæ•ˆï¼ŒWS æ”¶åˆ° detail å­—æ®µ `plan_id/symbol/side/order_type/price/quantity/leg_id/exchange_id/account_type` ç­‰
- OMS å¼‚å¸¸åœºæ™¯ï¼šreconcile preview æ‰¹é‡è¿”å› 3 æ¡ç»“æœï¼›`auto_cancel` æ¨¡å¼ reconcile æˆåŠŸ
- è¡Œæƒ… Redis æŒ‡æ ‡ï¼š`market_data_metrics`/`metrics:market_data_service` å‡æœ‰ timestampï¼›symbols_spot=182ï¼›orderbook=5ï¼›fresh=falseï¼ˆéœ€è§‚å¯Ÿåˆ·æ–°é—´éš”ï¼‰
- å›å½’èŒƒå›´è¡¥å……ï¼š`tests/integration/test_global_strategy.py` 2 passed / 3 skippedï¼›`tests/ui_smoke_test.py` 1 skipped
- æœºä¼šäº§å‡ºç¨³å®šæ€§ï¼š5 è½®é‡‡æ · `metrics_tri=0`ã€`metrics_cc=9~12`ï¼›API åˆ—è¡¨ `tri=0/cc=0`ï¼ˆä¸ metrics å·®å¼‚ï¼Œéœ€åç»­æ ¸å¯¹å­˜å‚¨ä¸Šé™/åˆ·æ–°èŠ‚å¥ï¼‰
- å†³ç­–çº¦æŸéªŒè¯ï¼šconstraints/effective min_profit_rate=0.001ã€max_positions=5ï¼›auto æœªè®¾ç½®ï¼›3 è½®å†³ç­–æ•°é‡ç¨³å®šä¸º 1
- metrics æ ¸å¯¹ï¼šmetrics opp/decisions ä¸ redis ä¸€è‡´ï¼ˆtri=0/cc=11/decisions=1ï¼‰ï¼›constraints min_profit_rate=0.001ï¼›market_regime ä¸ºç©ºï¼ˆéœ€ç¡®è®¤åˆ·æ–°è§¦å‘ï¼‰
- OMS è®¡åˆ’éªŒè¯ï¼šexecute_latest æˆåŠŸï¼›plan_status=completedï¼›legs=5ï¼ˆplan_id=cc282874-d36b-4873-8b19-e78d6d73ab85ï¼‰
- OMS é—­ç¯ï¼šorders=5ã€fills=5ï¼›PNL summary keys=avg_profit/total_orders/total_profit/trading_mode/win_rate
- OMS å¯¹è´¦å¥å£®æ€§ï¼šplan reconcile/refresh/cancel å…¨éƒ¨ successï¼›order refresh/cancel successï¼ˆorder_id=bfb91d27-c77b-4880-9e88-cd17ee51484bï¼‰
- WS è®¢å•å­—æ®µï¼šæ”¶åˆ° account_type/exchange_id/leg_id/plan_id/order_type/price/quantity/symbol/side ç­‰ï¼Œdetail å­—æ®µé½å…¨
- é£æ§æ•°æ®ç¼“å­˜ï¼šRiskManager/Exposure/Rebalancer å¢åŠ  portfolio/balances ç¼“å­˜ï¼›risk/status è¿”å› keys=drawdown/exposure/total_equity
